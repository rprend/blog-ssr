<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{title}}</title>
  <meta name="description" content="{{description}}">
  <meta name="author" content="Ryan Prendergast">
  <link rel="icon" href="/favicon.ico">
  
  <!-- Theme Switcher Script (runs before body to prevent flash) -->
  <script>
    (function() {
      const themes = {
        'tufte': '/tufte.css',
        '98': 'https://unpkg.com/98.css',
        'xp': 'https://unpkg.com/xp.css',
        'terminal': 'https://unpkg.com/terminal.css@0.7.4/dist/terminal.min.css'
      };
      
      const savedTheme = localStorage.getItem('theme') || 'tufte';
      const themeUrl = themes[savedTheme] || themes.tufte;
      
      // Preload fonts for tufte theme
      if (savedTheme === 'tufte') {
        document.write('<link rel="preload" href="/et-book-roman-line-figures/et-book-roman-line-figures.woff" as="font" type="font/woff" crossorigin>');
        document.write('<link rel="preload" href="/et-book-bold-line-figures/et-book-bold-line-figures.woff" as="font" type="font/woff" crossorigin>');
      }
      
      // Load the theme stylesheet
      document.write('<link id="theme-stylesheet" href="' + themeUrl + '" rel="stylesheet">');
    })();
  </script>
  
  <!-- Load custom styles after theme -->
  <link href="/styles.css" rel="stylesheet">
  
  <!-- Open Graph meta tags for social sharing -->
  <meta property="og:title" content="{{title}}">
  <meta property="og:description" content="{{description}}">
  <meta property="og:type" content="{{ogType}}">
  <meta property="og:url" content="{{canonicalUrl}}">
  <meta property="og:site_name" content="Ryan Prendergast">
  {{ogImage}}
  
  <!-- Twitter Card meta tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="{{title}}">
  <meta name="twitter:description" content="{{description}}">
  {{twitterImage}}
  
  <!-- Canonical URL -->
  <link rel="canonical" href="{{canonicalUrl}}">
  
  <!-- RSS Feed -->
  <link rel="alternate" type="application/rss+xml" title="Ryan Prendergast's Blog RSS" href="/rss.xml">
  
  <!-- Additional SEO meta tags -->
  <meta name="robots" content="index, follow">
  <meta name="language" content="en">
  <meta name="revisit-after" content="7 days">
  
  <!-- Structured data will be injected here -->
  {{structuredData}}
</head>
<body>
  <div class="nav-container">
    {{nav}}
  </div>
  <article>
    {{content}}
  </article>
  
  <script>
    // Set the current theme in the dropdown
    document.getElementById('theme-select').value = localStorage.getItem('theme') || 'tufte';
    
    function switchTheme(themeName) {
      const themes = {
        'tufte': '/tufte.css',
        '98': 'https://unpkg.com/98.css',
        'xp': 'https://unpkg.com/xp.css',
        'terminal': 'https://unpkg.com/terminal.css@0.7.4/dist/terminal.min.css'
      };
      
      const themeUrl = themes[themeName] || themes.tufte;
      document.getElementById('theme-stylesheet').href = themeUrl;
      localStorage.setItem('theme', themeName);
    }
  </script>
</body>
</html>